pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
lim=128

t=0
ar_x=lim/2
ar_y=lim/2
ac_x=0
ac_y=0
bd_x={}
bd_y={}
bd_d=6
pt_x={ar_x,ar_x,ar_x,ar_x}
pt_y={ar_y,ar_y,ar_y,ar_y}
pl_x={ar_x,ar_x,ar_x,ar_x}
pl_y={ar_y,ar_y,ar_y,ar_y}
rt_x=0
rt_y=0
vi=0

for i=1,bd_d do
	bd_x[i]=ar_x
	bd_y[i]=ar_y
end
function _update()
--intro:
if vi<65 then vi+=1 end

--tempo:
t+=1

--fisica:
	ar_x+=ac_x
	ar_y+=ac_y
	ac_x+=-ac_x*0.1
	ac_y+=-ac_y*0.1
	if (abs(ac_x)+abs(ac_y))>1 then
		vel=8 ap_v=0.8 else vel=16 ap_v=0.4 end
	
--corpo:
	for i=bd_d,1,-1 do
		bd_x[i+1]=bd_x[i]
		bd_y[i+1]=bd_y[i]
	end
	bd_x[1]=ar_x
	bd_y[1]=ar_y

--patas:
	if t%vel==0 then
		pt_x[1]=ar_x+rt_x
		pt_y[1]=ar_y-rt_y
	end
	if t%vel==vel/4 then
		pt_x[3]=ar_x+rt_y
		pt_y[3]=ar_y-rt_x
	end
	if t%vel==vel/2 then
		pt_x[2]=ar_x-rt_x
  pt_y[2]=ar_y+rt_y
 end
 if t%vel==(vel*3)/4 then
  pt_x[4]=ar_x-rt_y
  pt_y[4]=ar_y+rt_x
 end
 
--patas loc:
	pl_x[1]+=(pt_x[1]-pl_x[1])*ap_v
	pl_y[1]+=(pt_y[1]-pl_y[1])*ap_v
	pl_x[2]+=(pt_x[2]-pl_x[2])*ap_v
	pl_y[2]+=(pt_y[2]-pl_y[2])*ap_v
 pl_x[3]+=(pt_x[3]-pl_x[3])*ap_v
	pl_y[3]+=(pt_y[3]-pl_y[3])*ap_v
	pl_x[4]+=(pt_x[4]-pl_x[4])*ap_v
	pl_y[4]+=(pt_y[4]-pl_y[4])*ap_v
--controle:
	if btn(0) then
	 ac_x-=1 
	 rt_y+=(10-rt_y)*0.9 
	 rt_x+=-rt_x*0.9
	end
	if btn(1) then
	 ac_x+=1
	 rt_y+=(-10-rt_y)*0.9 
	 rt_x+=-rt_x*0.9
	end
 if btn(2) then
  ac_y-=1
  rt_x+=(10-rt_x)*0.9 
	 rt_y+=-rt_y*0.9 
 end
	if btn(3) then
	 ac_y+=1
	 rt_x+=(-10-rt_x)*0.9 
	 rt_y+=-rt_y*0.9
	end
	
	


--display
	cls(0)
	circfill(bd_x[bd_d],bd_y[bd_d],4,6)

--patas
	circ(pl_x[1],pl_y[1]+0,2)
 circ(pl_x[2],pl_y[2]+0,2)
 circ(pl_x[3],pl_y[3]+0,2)
 circ(pl_x[4],pl_y[4]+0,2)
	rect(0,0,lim-1,lim-1,6)
	rectfill(0,128,128,vi+64,0)
	rectfill(0,-1,128,-vi+64,0)
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000003503429034000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__music__
00 01424344

